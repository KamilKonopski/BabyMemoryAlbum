<UserControl x:Class="MojePierwsze.Views.EntryView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:conv="clr-namespace:MojePierwsze.Converters"
             xmlns:vm="clr-namespace:MojePierwsze.ViewModels"
             mc:Ignorable="d"
             d:DesignHeight="700" d:DesignWidth="1000">

    <UserControl.Resources>
        <conv:InverseBoolToVisibilityConverter x:Key="InverseBoolToVisibilityConverter"/>
        <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter" />
        

        <conv:BoolToColumnConverter x:Key="BoolToColumnConverter"/>
        <conv:BoolToOppositeColumnConverter x:Key="BoolToOppositeColumnConverter"/>

        <Storyboard x:Key="FadeInStoryboard">
            <DoubleAnimation Storyboard.TargetProperty="Opacity"
                         From="0" To="1" Duration="0:0:0.3"/>
        </Storyboard>

        <Style TargetType="Button" x:Key="NavButtonStyle" BasedOn="{StaticResource MainButtonStyle}">
            <Setter Property="Background" Value="#F3A7D4"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="FontWeight" Value="Bold"/>
            <Setter Property="Padding" Value="10,5"/>
            <Setter Property="MinWidth" Value="100"/>
            <Setter Property="Height" Value="35"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="BorderBrush" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>

            <Style.Triggers>
                <Trigger Property="IsEnabled" Value="False">
                    <Setter Property="Background" Value="#FFD8D8D8"/>
                    <Setter Property="Foreground" Value="#FF8E8E8E"/>
                    <Setter Property="Cursor" Value="Arrow"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </UserControl.Resources>

    <Grid Margin="40">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <DockPanel Grid.Row="0" Margin="0,0,0,20">
            <Button Content="← Wróć"
                    Click="Back_Click"
                    Style="{StaticResource MainButtonStyle}"
                    Width="120"
                    HorizontalAlignment="Left"/>
            <TextBlock Text="{Binding CurrentPositionText}"
                       FontWeight="Bold"
                       FontSize="16"
                       Foreground="#444"
                       HorizontalAlignment="Right"
                       VerticalAlignment="Center"
                       DockPanel.Dock="Right"/>
        </DockPanel>

        <Grid Grid.Row="1">
            <StackPanel Visibility="{Binding HasEntries, Converter={StaticResource InverseBoolToVisibilityConverter}}"
            HorizontalAlignment="Center" VerticalAlignment="Center">
                <TextBlock Text="Nie ma żadnych wpisów"
                           FontSize="18"
                           FontWeight="Bold"
                           Margin="0,0,0,10"
                           HorizontalAlignment="Center"/>
                <Button Content="Dodaj wpis"
                        Click="AddEntry_Click"
                        Style="{StaticResource MainButtonStyle}"
                        Width="120"
                        HorizontalAlignment="Center"/>
            </StackPanel>

            <Grid Visibility="{Binding HasEntries, Converter={StaticResource BooleanToVisibilityConverter}}"
                  Margin="0">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>

                <Border Grid.Column="{Binding IsEven, Converter={StaticResource BoolToColumnConverter}}"
                        Margin="16"
                        CornerRadius="8"
                        Background="#FFF0F0F0"
                        VerticalAlignment="Top"
                        Height="420">
                    <Image Source="{Binding CurrentPhoto}" Stretch="UniformToFill"/>
                </Border>

                <StackPanel Grid.Column="{Binding IsEven, Converter={StaticResource BoolToOppositeColumnConverter}}"
                            Margin="20,0,20,0"
                            VerticalAlignment="Top">
                    <TextBlock Text="{Binding CurrentEntry.Title}"
                               FontSize="22" FontWeight="Bold" Margin="0,0,0,10"/>
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <TextBlock Text="{Binding CurrentEntry.Date, StringFormat='{}{0:dd.MM.yyyy}'}"
                                   FontStyle="Italic" Foreground="Gray" Margin="0,0,10,0"/>
                        <TextBlock Text="{Binding CurrentEntry.Place}"
                                   Foreground="Gray"/>
                    </StackPanel>

                    <TextBlock Text="{Binding CurrentEntry.Description}"
                               TextWrapping="Wrap" FontSize="15" Margin="0,0,0,10"/>

                    <Button Content="Edytuj wpis"
                            Click="EditEntry_Click"
                            Style="{StaticResource MainButtonStyle}"
                            Width="120"/>
                </StackPanel>
            </Grid>
        </Grid>

        <Grid Grid.Row="2" Margin="0,30,0,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="*" />
            </Grid.ColumnDefinitions>

            <Button Grid.Column="0"
            Content="← Poprzedni"
            Click="Previous_Click"
            IsEnabled="{Binding CanGoPrevious}"
            Style="{StaticResource NavButtonStyle}"
            Width="120"
            HorizontalAlignment="Left"/>

            <Button Grid.Column="1"
            Content="Następny →"
            Click="Next_Click"
            IsEnabled="{Binding CanGoNext}"
            Style="{StaticResource NavButtonStyle}"
            Width="120"
            HorizontalAlignment="Right"/>
        </Grid>
    </Grid>
</UserControl>